<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OuijaDesk.App.Pages.MainPage"
             Title="Ouija">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            
            <!-- First Row: Port Controls -->
            <Grid ColumnDefinitions="Auto,*,Auto,Auto" ColumnSpacing="10">
                <Label Text="Порт:" 
                       VerticalOptions="Center"
                       Grid.Column="0" />
                
                <Picker Grid.Column="1"
                        ItemsSource="{Binding Ports}"
                        ItemDisplayBinding="{Binding PortName}"
                        SelectedItem="{Binding SelectedPort}"
                        VerticalOptions="Center" />
                
                <Button Grid.Column="2"
                        Text="Сканировать порты"
                        Command="{Binding ScanPortsCommand}" />
                
                <Button Grid.Column="3"
                        Text="Проверить статус"
                        Command="{Binding CheckStatusCommand}" />
            </Grid>
            
            <!-- Second Row: Text Input -->
            <Entry Placeholder="Введите текст для воспроизведения"
                   Text="{Binding Text}" />
            
            <!-- Third Row: Command Buttons -->
            <Grid ColumnDefinitions="*,*,*,*,*" ColumnSpacing="10">
                <Button Grid.Column="0"
                        Text="Воспроизвести один раз"
                        Command="{Binding SendCommandCommand}"
                        CommandParameter="1" />
                
                <Button Grid.Column="1"
                        Text="Воспроизвести повторно"
                        Command="{Binding SendCommandCommand}"
                        CommandParameter="2" />
                
                <Button Grid.Column="2"
                        Text="Стоп"
                        Command="{Binding SendCommandCommand}"
                        CommandParameter="3" />
                
                <Button Grid.Column="3"
                        Text="Да"
                        Command="{Binding SendCommandCommand}"
                        CommandParameter="4" />
                
                <Button Grid.Column="4"
                        Text="Нет"
                        Command="{Binding SendCommandCommand}"
                        CommandParameter="5" />
            </Grid>
            
            <!-- Fourth Row: Status Messages (newest on top) -->
            <ScrollView Orientation="Vertical"
                        VerticalOptions="Center"
                        HeightRequest="200">
                <VerticalStackLayout BindableLayout.ItemsSource="{Binding StatusMessages}"
                                     Spacing="8"
                                     Padding="0">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding .}"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center" />
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </VerticalStackLayout>
            </ScrollView>
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>